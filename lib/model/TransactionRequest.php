<?php
/**
 * TransactionRequest
 *
 * PHP version 7.2
 *
 * @category Class
 * @package  Gr4vy
 * @author   OpenAPI Generator team
 * @link     https://openapi-generator.tech
 */

/**
 * Gr4vy API
 *
 * Welcome to the Gr4vy API reference documentation. Our API is still very much a work in product and subject to change.
 *
 * The version of the OpenAPI document: 1.1.0-beta
 * Contact: code@gr4vy.com
 * Generated by: https://openapi-generator.tech
 * OpenAPI Generator version: 5.1.1
 */

/**
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */

namespace Gr4vy\model;

use \ArrayAccess;
use \Gr4vy\ObjectSerializer;

/**
 * TransactionRequest Class Doc Comment
 *
 * @category Class
 * @description A request to create a transaction.
 * @package  Gr4vy
 * @author   OpenAPI Generator team
 * @link     https://openapi-generator.tech
 * @implements \ArrayAccess<TKey, TValue>
 * @template TKey int|null
 * @template TValue mixed|null
 */
class TransactionRequest implements ModelInterface, ArrayAccess, \JsonSerializable
{
    public const DISCRIMINATOR = null;

    /**
      * The original name of the model.
      *
      * @var string
      */
    protected static $openAPIModelName = 'TransactionRequest';

    /**
      * Array of property to type mappings. Used for (de)serialization
      *
      * @var string[]
      */
    protected static $openAPITypes = [
        'amount' => 'int',
        'currency' => 'string',
        'payment_method' => '\Gr4vy\model\TransactionPaymentMethodRequest',
        'store' => 'bool',
        'intent' => 'string',
        'external_identifier' => 'string',
        'three_d_secure_data' => '\Gr4vy\model\ThreeDSecureDataV1V2',
        'merchant_initiated' => 'bool',
        'payment_source' => 'string',
        'is_subsequent_payment' => 'bool',
        'metadata' => 'array<string,string>',
        'statement_descriptor' => 'StatementDescriptor',
        'cart_items' => '\Gr4vy\model\CartItem[]',
        'previous_scheme_transaction_id' => 'string'
    ];

    /**
      * Array of property to format mappings. Used for (de)serialization
      *
      * @var string[]
      * @phpstan-var array<string, string|null>
      * @psalm-var array<string, string|null>
      */
    protected static $openAPIFormats = [
        'amount' => null,
        'currency' => null,
        'payment_method' => null,
        'store' => null,
        'intent' => null,
        'external_identifier' => null,
        'three_d_secure_data' => null,
        'merchant_initiated' => null,
        'payment_source' => null,
        'is_subsequent_payment' => null,
        'metadata' => null,
        'statement_descriptor' => null,
        'cart_items' => null,
        'previous_scheme_transaction_id' => null
    ];

    /**
     * Array of property to type mappings. Used for (de)serialization
     *
     * @return array
     */
    public static function openAPITypes()
    {
        return self::$openAPITypes;
    }

    /**
     * Array of property to format mappings. Used for (de)serialization
     *
     * @return array
     */
    public static function openAPIFormats()
    {
        return self::$openAPIFormats;
    }

    /**
     * Array of attributes where the key is the local name,
     * and the value is the original name
     *
     * @var string[]
     */
    protected static $attributeMap = [
        'amount' => 'amount',
        'currency' => 'currency',
        'payment_method' => 'payment_method',
        'store' => 'store',
        'intent' => 'intent',
        'external_identifier' => 'external_identifier',
        'three_d_secure_data' => 'three_d_secure_data',
        'merchant_initiated' => 'merchant_initiated',
        'payment_source' => 'payment_source',
        'is_subsequent_payment' => 'is_subsequent_payment',
        'metadata' => 'metadata',
        'statement_descriptor' => 'statement_descriptor',
        'cart_items' => 'cart_items',
        'previous_scheme_transaction_id' => 'previous_scheme_transaction_id'
    ];

    /**
     * Array of attributes to setter functions (for deserialization of responses)
     *
     * @var string[]
     */
    protected static $setters = [
        'amount' => 'setAmount',
        'currency' => 'setCurrency',
        'payment_method' => 'setPaymentMethod',
        'store' => 'setStore',
        'intent' => 'setIntent',
        'external_identifier' => 'setExternalIdentifier',
        'three_d_secure_data' => 'setThreeDSecureData',
        'merchant_initiated' => 'setMerchantInitiated',
        'payment_source' => 'setPaymentSource',
        'is_subsequent_payment' => 'setIsSubsequentPayment',
        'metadata' => 'setMetadata',
        'statement_descriptor' => 'setStatementDescriptor',
        'cart_items' => 'setCartItems',
        'previous_scheme_transaction_id' => 'setPreviousSchemeTransactionId'
    ];

    /**
     * Array of attributes to getter functions (for serialization of requests)
     *
     * @var string[]
     */
    protected static $getters = [
        'amount' => 'getAmount',
        'currency' => 'getCurrency',
        'payment_method' => 'getPaymentMethod',
        'store' => 'getStore',
        'intent' => 'getIntent',
        'external_identifier' => 'getExternalIdentifier',
        'three_d_secure_data' => 'getThreeDSecureData',
        'merchant_initiated' => 'getMerchantInitiated',
        'payment_source' => 'getPaymentSource',
        'is_subsequent_payment' => 'getIsSubsequentPayment',
        'metadata' => 'getMetadata',
        'statement_descriptor' => 'getStatementDescriptor',
        'cart_items' => 'getCartItems',
        'previous_scheme_transaction_id' => 'getPreviousSchemeTransactionId'
    ];

    /**
     * Array of attributes where the key is the local name,
     * and the value is the original name
     *
     * @return array
     */
    public static function attributeMap()
    {
        return self::$attributeMap;
    }

    /**
     * Array of attributes to setter functions (for deserialization of responses)
     *
     * @return array
     */
    public static function setters()
    {
        return self::$setters;
    }

    /**
     * Array of attributes to getter functions (for serialization of requests)
     *
     * @return array
     */
    public static function getters()
    {
        return self::$getters;
    }

    /**
     * The original name of the model.
     *
     * @return string
     */
    public function getModelName()
    {
        return self::$openAPIModelName;
    }

    const INTENT_AUTHORIZE = 'authorize';
    const INTENT_CAPTURE = 'capture';
    const PAYMENT_SOURCE_ECOMMERCE = 'ecommerce';
    const PAYMENT_SOURCE_MOTO = 'moto';
    const PAYMENT_SOURCE_RECURRING = 'recurring';
    const PAYMENT_SOURCE_INSTALLMENT = 'installment';
    const PAYMENT_SOURCE_CARD_ON_FILE = 'card_on_file';

    /**
     * Gets allowable values of the enum
     *
     * @return string[]
     */
    public function getIntentAllowableValues()
    {
        return [
            self::INTENT_AUTHORIZE,
            self::INTENT_CAPTURE,
        ];
    }

    /**
     * Gets allowable values of the enum
     *
     * @return string[]
     */
    public function getPaymentSourceAllowableValues()
    {
        return [
            self::PAYMENT_SOURCE_ECOMMERCE,
            self::PAYMENT_SOURCE_MOTO,
            self::PAYMENT_SOURCE_RECURRING,
            self::PAYMENT_SOURCE_INSTALLMENT,
            self::PAYMENT_SOURCE_CARD_ON_FILE,
        ];
    }

    /**
     * Associative array for storing property values
     *
     * @var mixed[]
     */
    protected $container = [];

    /**
     * Constructor
     *
     * @param mixed[] $data Associated array of property values
     *                      initializing the model
     */
    public function __construct(array $data = null)
    {
        $this->container['amount'] = $data['amount'] ?? null;
        $this->container['currency'] = $data['currency'] ?? null;
        $this->container['payment_method'] = $data['payment_method'] ?? null;
        $this->container['store'] = $data['store'] ?? false;
        $this->container['intent'] = $data['intent'] ?? INTENT_AUTHORIZE;
        $this->container['external_identifier'] = $data['external_identifier'] ?? null;
        $this->container['three_d_secure_data'] = $data['three_d_secure_data'] ?? null;
        $this->container['merchant_initiated'] = $data['merchant_initiated'] ?? false;
        $this->container['payment_source'] = $data['payment_source'] ?? null;
        $this->container['is_subsequent_payment'] = $data['is_subsequent_payment'] ?? false;
        $this->container['metadata'] = $data['metadata'] ?? null;
        $this->container['statement_descriptor'] = $data['statement_descriptor'] ?? null;
        $this->container['cart_items'] = $data['cart_items'] ?? null;
        $this->container['previous_scheme_transaction_id'] = $data['previous_scheme_transaction_id'] ?? 'null';
    }

    /**
     * Show all the invalid properties with reasons.
     *
     * @return array invalid properties with reasons
     */
    public function listInvalidProperties()
    {
        $invalidProperties = [];

        if ($this->container['amount'] === null) {
            $invalidProperties[] = "'amount' can't be null";
        }
        if (($this->container['amount'] > 99999999)) {
            $invalidProperties[] = "invalid value for 'amount', must be smaller than or equal to 99999999.";
        }

        if (($this->container['amount'] < 0)) {
            $invalidProperties[] = "invalid value for 'amount', must be bigger than or equal to 0.";
        }

        if ($this->container['currency'] === null) {
            $invalidProperties[] = "'currency' can't be null";
        }
        if ($this->container['payment_method'] === null) {
            $invalidProperties[] = "'payment_method' can't be null";
        }
        $allowedValues = $this->getIntentAllowableValues();
        if (!is_null($this->container['intent']) && !in_array($this->container['intent'], $allowedValues, true)) {
            $invalidProperties[] = sprintf(
                "invalid value '%s' for 'intent', must be one of '%s'",
                $this->container['intent'],
                implode("', '", $allowedValues)
            );
        }

        $allowedValues = $this->getPaymentSourceAllowableValues();
        if (!is_null($this->container['payment_source']) && !in_array($this->container['payment_source'], $allowedValues, true)) {
            $invalidProperties[] = sprintf(
                "invalid value '%s' for 'payment_source', must be one of '%s'",
                $this->container['payment_source'],
                implode("', '", $allowedValues)
            );
        }

        if (!is_null($this->container['metadata']) && (count($this->container['metadata']) > 20)) {
            $invalidProperties[] = "invalid value for 'metadata', number of items must be less than or equal to 20.";
        }

        if (!is_null($this->container['cart_items']) && (count($this->container['cart_items']) > 249)) {
            $invalidProperties[] = "invalid value for 'cart_items', number of items must be less than or equal to 249.";
        }

        return $invalidProperties;
    }

    /**
     * Validate all the properties in the model
     * return true if all passed
     *
     * @return bool True if all properties are valid
     */
    public function valid()
    {
        return count($this->listInvalidProperties()) === 0;
    }


    /**
     * Gets amount
     *
     * @return int
     */
    public function getAmount()
    {
        return $this->container['amount'];
    }

    /**
     * Sets amount
     *
     * @param int $amount The monetary amount to create an authorization for, in the smallest currency unit for the given currency, for example `1299` cents to create an authorization for `$12.99`.
     *
     * @return self
     */
    public function setAmount($amount)
    {

        if (($amount > 99999999)) {
            throw new \InvalidArgumentException('invalid value for $amount when calling TransactionRequest., must be smaller than or equal to 99999999.');
        }
        if (($amount < 0)) {
            throw new \InvalidArgumentException('invalid value for $amount when calling TransactionRequest., must be bigger than or equal to 0.');
        }

        $this->container['amount'] = $amount;

        return $this;
    }

    /**
     * Gets currency
     *
     * @return string
     */
    public function getCurrency()
    {
        return $this->container['currency'];
    }

    /**
     * Sets currency
     *
     * @param string $currency A supported ISO-4217 currency code.
     *
     * @return self
     */
    public function setCurrency($currency)
    {
        $this->container['currency'] = $currency;

        return $this;
    }

    /**
     * Gets payment_method
     *
     * @return \Gr4vy\model\TransactionPaymentMethodRequest
     */
    public function getPaymentMethod()
    {
        return $this->container['payment_method'];
    }

    /**
     * Sets payment_method
     *
     * @param \Gr4vy\model\TransactionPaymentMethodRequest $payment_method payment_method
     *
     * @return self
     */
    public function setPaymentMethod($payment_method)
    {
        $this->container['payment_method'] = $payment_method;

        return $this;
    }

    /**
     * Gets store
     *
     * @return bool|null
     */
    public function getStore()
    {
        return $this->container['store'];
    }

    /**
     * Sets store
     *
     * @param bool|null $store Whether or not to also try and store the payment method with us so that it can be used again for future use. This is only supported for payment methods that support this feature.
     *
     * @return self
     */
    public function setStore($store)
    {
        $this->container['store'] = $store;

        return $this;
    }

    /**
     * Gets intent
     *
     * @return string|null
     */
    public function getIntent()
    {
        return $this->container['intent'];
    }

    /**
     * Sets intent
     *
     * @param string|null $intent Defines the intent of this API call. This determines the desired initial state of the transaction.  * `authorize` - (Default) Optionally approves and then authorizes a transaction but does not capture the funds. * `capture` - Optionally approves and then authorizes and captures the funds of the transaction.
     *
     * @return self
     */
    public function setIntent($intent)
    {
        $allowedValues = $this->getIntentAllowableValues();
        if (!is_null($intent) && !in_array($intent, $allowedValues, true)) {
            throw new \InvalidArgumentException(
                sprintf(
                    "Invalid value '%s' for 'intent', must be one of '%s'",
                    $intent,
                    implode("', '", $allowedValues)
                )
            );
        }
        $this->container['intent'] = $intent;

        return $this;
    }

    /**
     * Gets external_identifier
     *
     * @return string|null
     */
    public function getExternalIdentifier()
    {
        return $this->container['external_identifier'];
    }

    /**
     * Sets external_identifier
     *
     * @param string|null $external_identifier An external identifier that can be used to match the transaction against your own records.
     *
     * @return self
     */
    public function setExternalIdentifier($external_identifier)
    {
        $this->container['external_identifier'] = $external_identifier;

        return $this;
    }

    /**
     * Gets three_d_secure_data
     *
     * @return \Gr4vy\model\ThreeDSecureDataV1V2|null
     */
    public function getThreeDSecureData()
    {
        return $this->container['three_d_secure_data'];
    }

    /**
     * Sets three_d_secure_data
     *
     * @param \Gr4vy\model\ThreeDSecureDataV1V2|null $three_d_secure_data three_d_secure_data
     *
     * @return self
     */
    public function setThreeDSecureData($three_d_secure_data)
    {
        $this->container['three_d_secure_data'] = $three_d_secure_data;

        return $this;
    }

    /**
     * Gets merchant_initiated
     *
     * @return bool|null
     */
    public function getMerchantInitiated()
    {
        return $this->container['merchant_initiated'];
    }

    /**
     * Sets merchant_initiated
     *
     * @param bool|null $merchant_initiated Indicates whether the transaction was initiated by the merchant (true) or customer (false).
     *
     * @return self
     */
    public function setMerchantInitiated($merchant_initiated)
    {
        $this->container['merchant_initiated'] = $merchant_initiated;

        return $this;
    }

    /**
     * Gets payment_source
     *
     * @return string|null
     */
    public function getPaymentSource()
    {
        return $this->container['payment_source'];
    }

    /**
     * Sets payment_source
     *
     * @param string|null $payment_source The source of the transaction. Defaults to `ecommerce`.
     *
     * @return self
     */
    public function setPaymentSource($payment_source)
    {
        $allowedValues = $this->getPaymentSourceAllowableValues();
        if (!is_null($payment_source) && !in_array($payment_source, $allowedValues, true)) {
            throw new \InvalidArgumentException(
                sprintf(
                    "Invalid value '%s' for 'payment_source', must be one of '%s'",
                    $payment_source,
                    implode("', '", $allowedValues)
                )
            );
        }
        $this->container['payment_source'] = $payment_source;

        return $this;
    }

    /**
     * Gets is_subsequent_payment
     *
     * @return bool|null
     */
    public function getIsSubsequentPayment()
    {
        return $this->container['is_subsequent_payment'];
    }

    /**
     * Sets is_subsequent_payment
     *
     * @param bool|null $is_subsequent_payment Indicates whether the transaction represents a subsequent payment coming from a setup recurring payment. Please note this flag is only compatible with `payment_source` set to `recurring`, `installment`, or `card_on_file` and will be ignored for other values or if `payment_source` is not present.
     *
     * @return self
     */
    public function setIsSubsequentPayment($is_subsequent_payment)
    {
        $this->container['is_subsequent_payment'] = $is_subsequent_payment;

        return $this;
    }

    /**
     * Gets metadata
     *
     * @return array<string,string>|null
     */
    public function getMetadata()
    {
        return $this->container['metadata'];
    }

    /**
     * Sets metadata
     *
     * @param array<string,string>|null $metadata Any additional information about the transaction that you would like to store as key-value pairs. This data is passed to payment service providers that support it. Please visit https://gr4vy.com/docs/ under `Connections` for more information on how specific providers support metadata.
     *
     * @return self
     */
    public function setMetadata($metadata)
    {

        if (!is_null($metadata) && (count($metadata) > 20)) {
            throw new \InvalidArgumentException('invalid value for $metadata when calling TransactionRequest., number of items must be less than or equal to 20.');
        }
        $this->container['metadata'] = $metadata;

        return $this;
    }

    /**
     * Gets statement_descriptor
     *
     * @return StatementDescriptor|null
     */
    public function getStatementDescriptor()
    {
        return $this->container['statement_descriptor'];
    }

    /**
     * Sets statement_descriptor
     *
     * @param StatementDescriptor|null $statement_descriptor statement_descriptor
     *
     * @return self
     */
    public function setStatementDescriptor($statement_descriptor)
    {
        $this->container['statement_descriptor'] = $statement_descriptor;

        return $this;
    }

    /**
     * Gets cart_items
     *
     * @return \Gr4vy\model\CartItem[]|null
     */
    public function getCartItems()
    {
        return $this->container['cart_items'];
    }

    /**
     * Sets cart_items
     *
     * @param \Gr4vy\model\CartItem[]|null $cart_items An array of cart items that represents the line items of a transaction.
     *
     * @return self
     */
    public function setCartItems($cart_items)
    {

        if (!is_null($cart_items) && (count($cart_items) > 249)) {
            throw new \InvalidArgumentException('invalid value for $cart_items when calling TransactionRequest., number of items must be less than or equal to 249.');
        }
        $this->container['cart_items'] = $cart_items;

        return $this;
    }

    /**
     * Gets previous_scheme_transaction_id
     *
     * @return string|null
     */
    public function getPreviousSchemeTransactionId()
    {
        return $this->container['previous_scheme_transaction_id'];
    }

    /**
     * Sets previous_scheme_transaction_id
     *
     * @param string|null $previous_scheme_transaction_id A scheme's transaction identifier to use in connecting a merchant initiated transaction to a previous customer initiated transaction.  If not provided, and a qualifying customer initiated transaction has been previously made, then Gr4vy will populate this value with the identifier returned for that transaction.  e.g. the Visa Transaction Identifier, or Mastercard Trace ID.
     *
     * @return self
     */
    public function setPreviousSchemeTransactionId($previous_scheme_transaction_id)
    {
        $this->container['previous_scheme_transaction_id'] = $previous_scheme_transaction_id;

        return $this;
    }
    /**
     * Returns true if offset exists. False otherwise.
     *
     * @param integer $offset Offset
     *
     * @return boolean
     */
    public function offsetExists($offset)
    {
        return isset($this->container[$offset]);
    }

    /**
     * Gets offset.
     *
     * @param integer $offset Offset
     *
     * @return mixed|null
     */
    public function offsetGet($offset)
    {
        return $this->container[$offset] ?? null;
    }

    /**
     * Sets value based on offset.
     *
     * @param int|null $offset Offset
     * @param mixed    $value  Value to be set
     *
     * @return void
     */
    public function offsetSet($offset, $value)
    {
        if (is_null($offset)) {
            $this->container[] = $value;
        } else {
            $this->container[$offset] = $value;
        }
    }

    /**
     * Unsets offset.
     *
     * @param integer $offset Offset
     *
     * @return void
     */
    public function offsetUnset($offset)
    {
        unset($this->container[$offset]);
    }

    /**
     * Serializes the object to a value that can be serialized natively by json_encode().
     * @link https://www.php.net/manual/en/jsonserializable.jsonserialize.php
     *
     * @return mixed Returns data which can be serialized by json_encode(), which is a value
     * of any type other than a resource.
     */
    public function jsonSerialize()
    {
       return ObjectSerializer::sanitizeForSerialization($this);
    }

    /**
     * Gets the string presentation of the object
     *
     * @return string
     */
    public function __toString()
    {
        return json_encode(
            ObjectSerializer::sanitizeForSerialization($this),
            JSON_PRETTY_PRINT
        );
    }

    /**
     * Gets a header-safe presentation of the object
     *
     * @return string
     */
    public function toHeaderValue()
    {
        return json_encode(ObjectSerializer::sanitizeForSerialization($this));
    }
}


